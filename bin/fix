#!/usr/bin/env pwsh
<#====================================================================
 ğŸ› ï¸ FIX
 Description : Auto-healing, remediation logic, or fallbacks.
====================================================================#>

# Load environment variables
if [ -f .env ]; then
  export $(grep -v '^#' .env | xargs)
else
  echo "âš ï¸  Warning: .env file not found. Continuing without environment overrides."
fi


source venv/Scripts/activate || {
  echo "âŒ ERROR: Could not activate virtual environment."
  exit 1
}

export PYTHONPATH=src

echo "ğŸ”§ Applying fixes..."

echo "â†ªï¸ Sorting imports with isort..."
isort src tests

echo "ğŸ¨ Formatting code with black..."
black src tests

echo "ğŸ§¹ Re-running flake8 to check cleanliness..."
flake8 src tests || {
  echo "âŒ Lint check failed after fixes."
  exit 1
}

echo "âœ… Code formatted and lint passed."
